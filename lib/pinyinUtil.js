!function(){function n(n,t,e){t=t||"";for(var r=[""],o=[],f=0;f<n.length;f++){o=[];for(var a=n[f].split(t),h=0;h<a.length;h++)for(var p=0;p<r.length;p++)o.push(r[p]+(r[p]?e:"")+a[h]);r=o}return i(r)}function t(n,t,i,e){var o=window.pinyin_dict_polyphone,f=o[n];if(f){f=f.split("");for(l=0;l<f.length;l++)t[l]=f[l]||t[l],e||(t[l]=r.removeTone(t[l]));return t.join(i)}for(l=0;l<n.length;l++){f="";for(var a=0;a<7&&l+a<n.length&&/^[\u2E80-\u9FFF]+$/.test(n[l+a]);a++){var h=o[f+=n[l+a]];if(h){h=h.split("");for(var p=0;p<=a;p++)h[p]&&(t[l+p]=e?h[p]:r.removeTone(h[p]));break}}}for(var l=0;l<t.length;l++)t[l]=t[l].replace(/ .*$/g,"");return t.join(i)}function i(n){for(var t=[],i={},e=0;e<n.length;e++){var r=typeof n[e]+n[e];i[r]||(t.push(n[e]),i[r]=!0)}return t}var e={},r={parseDict:function(){if(window.pinyin_dict_firstletter&&(e.firstletter=pinyin_dict_firstletter),window.pinyin_dict_notone){e.notone={},e.py2hz=pinyin_dict_notone;for(var n in pinyin_dict_notone)for(var t=0,i=(o=pinyin_dict_notone[n]).length;t<i;t++)e.notone[o[t]]=n}if(window.pinyin_dict_withtone){e.withtone={};for(var o=pinyin_dict_withtone.split(","),n=0,i=o.length;n<i;n++)e.withtone[String.fromCharCode(n+19968)]=o[n];if(window.pinyin_dict_notone)e.py2hz=pinyin_dict_notone;else{for(var f,a,h=r.removeTone(pinyin_dict_withtone).split(","),p={},n=0,i=h.length;n<i;n++){a=String.fromCharCode(n+19968),f=h[n].split("");for(t=0;t<f.length;t++)p[f[t]]=(p[f[t]]||"")+a}e.py2hz=p}}},getPinyin:function(i,r,o,f){if(!i||/^ +$/g.test(i))return"";r=void 0==r?"":r,o=void 0==o||o,f=void 0!=f&&f;var a=[];if(e.withtone)for(var h=0,p=i.length;h<p;h++){var l=e.withtone[i[h]];l&&(f||(l=l.replace(/ .*$/g,"")),o||(l=this.removeTone(l))),a.push(l||i[h])}else{if(!e.notone)throw"抱歉，未找到合适的拼音字典文件！";for(var h=0,p=i.length;h<p;h++){var v=i.charAt(h);a.push(e.notone[v]||v)}}return f?window.pinyin_dict_polyphone?t(i,a,r,o):n(a,"",r):a.join(r)},getFirstLetter:function(t,r){if(r=void 0!=r&&r,!t||/^ +$/g.test(t))return"";if(e.firstletter){for(var o=[],f=0;f<t.length;f++){var a=t.charCodeAt(f),h=t.charAt(f);a>=19968&&a<=40869&&(h=e.firstletter.all.charAt(a-19968),r&&(h=e.firstletter.polyphone[a]||h)),o.push(h)}return r?n(o,"",""):o.join("")}var p=this.getPinyin(t,"",!1,r);p=p instanceof Array?p:[p];for(var o=[],f=0;f<p.length;f++)o.push(p[f].replace(/(^| )(\w)\w*/g,function(n,t,i){return i.toUpperCase()}));return r?i(o):o[0]},getHanzi:function(n){if(!e.py2hz)throw"抱歉，未找到合适的拼音字典文件！";return e.py2hz[n]||""},removeTone:function(n){var t={"ā":"a1","á":"a2","ǎ":"a3","à":"a4","ō":"o1","ó":"o2","ǒ":"o3","ò":"o4","ē":"e1","é":"e2","ě":"e3","è":"e4","ī":"i1","í":"i2","ǐ":"i3","ì":"i4","ū":"u1","ú":"u2","ǔ":"u3","ù":"u4","ü":"v0","ǖ":"v1","ǘ":"v2","ǚ":"v3","ǜ":"v4","ń":"n2","ň":"n3","":"m2"};return n.replace(/[āáǎàōóǒòēéěèīíǐìūúǔùüǖǘǚǜńň]/g,function(n){return t[n][0]})}};r.parseDict(),r.dict=e,window.pinyinUtil=r}();